<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>/obj/machinery/barsign - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="obj/machinery/barsign.html#var">Var Details</a> - <a href="obj/machinery/barsign.html#proc">Proc Details</a></header><main><h1>barsign <aside>/<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/barsign.html">barsign</a></aside> <a href="https://github.com/Cure221/fulpstation/blob/5c84b165cfd352905122f5c45a47e6d3ccde59fb/code/game/machinery/barsigns.dm#L1"><img src="git.png" width="16" height="16" title="code/game/machinery/barsigns.dm 1"></a></h1><p>So what exactly is going on here?</p>
<p>Barsign unit testing requires a .dmi file has all icon states, and the icon checked for these icon states is the bar sign's icon
Because of this, we either add our signs to TG's file, or add TG's signs to ours, then use our dmi file.
The problem with this is if TG changes how their signs look, we wouldn't update.
Therefore, we keep the old system that will keep using TG's dmi for TG barsigns, therefore we only use our version of said signs for Ci
Knowing they exist, then swapping to TG's anyways.</p>
<p>Of course, none of this would be needed if it weren't for TG hardcoding everything, and it would mean Ci actually matters. Sucks to suck.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="obj/machinery/barsign.html#var/change_area_name">change_area_name</a></th><td>Do we attempt to rename the area we occupy when the chosen sign is changed?</td></tr><tr><th><a href="obj/machinery/barsign.html#var/chosen_sign">chosen_sign</a></th><td>Selected barsign being used</td></tr><tr><th><a href="obj/machinery/barsign.html#var/disassemble_result">disassemble_result</a></th><td>What kind of sign do we drop upon being disassembled?</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="obj/machinery/barsign.html#proc/finish_emag_act">finish_emag_act</a></th><td>Timer proc, called after ~10 seconds after [emag_act], since [emag_act] returns a value and cannot sleep</td></tr><tr><th><a href="obj/machinery/barsign.html#proc/fix_emp">fix_emp</a></th><td>Callback to un-emp the sign some time.</td></tr><tr><th><a href="obj/machinery/barsign.html#proc/set_sign">set_sign</a></th><td>Redirect our barsigns to use OUR .dmi file instead.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/change_area_name"><aside class="declaration">var </aside>change_area_name <aside>– </aside> <a href="https://github.com/Cure221/fulpstation/blob/5c84b165cfd352905122f5c45a47e6d3ccde59fb/code/game/machinery/barsigns.dm#L14"><img src="git.png" width="16" height="16" title="code/game/machinery/barsigns.dm 14"></a></h3><p>Do we attempt to rename the area we occupy when the chosen sign is changed?</p><h3 id="var/chosen_sign"><aside class="declaration">var </aside>chosen_sign <aside>– /<a href="datum.html">datum</a>/<a href="datum/barsign.html">barsign</a></aside> <a href="https://github.com/Cure221/fulpstation/blob/5c84b165cfd352905122f5c45a47e6d3ccde59fb/code/game/machinery/barsigns.dm#L12"><img src="git.png" width="16" height="16" title="code/game/machinery/barsigns.dm 12"></a></h3><p>Selected barsign being used</p><h3 id="var/disassemble_result"><aside class="declaration">var </aside>disassemble_result <aside>– </aside> <a href="https://github.com/Cure221/fulpstation/blob/5c84b165cfd352905122f5c45a47e6d3ccde59fb/code/game/machinery/barsigns.dm#L16"><img src="git.png" width="16" height="16" title="code/game/machinery/barsigns.dm 16"></a></h3><p>What kind of sign do we drop upon being disassembled?</p><h2 id="proc">Proc Details</h2><h3 id="proc/finish_emag_act"><aside class="declaration">proc </aside>finish_emag_act<aside>()  <a href="https://github.com/Cure221/fulpstation/blob/5c84b165cfd352905122f5c45a47e6d3ccde59fb/code/game/machinery/barsigns.dm#L211"><img src="git.png" width="16" height="16" title="code/game/machinery/barsigns.dm 211"></a></aside></h3><p>Timer proc, called after ~10 seconds after [emag_act], since [emag_act] returns a value and cannot sleep</p><h3 id="proc/fix_emp"><aside class="declaration">proc </aside>fix_emp<aside>(/<a href="datum.html">datum</a>/<a href="datum/barsign.html">barsign</a>/sign)  <a href="https://github.com/Cure221/fulpstation/blob/5c84b165cfd352905122f5c45a47e6d3ccde59fb/code/game/machinery/barsigns.dm#L194"><img src="git.png" width="16" height="16" title="code/game/machinery/barsigns.dm 194"></a></aside></h3><p>Callback to un-emp the sign some time.</p><h3 id="proc/set_sign"><aside class="declaration">proc </aside>set_sign<aside>(/<a href="datum.html">datum</a>/<a href="datum/barsign.html">barsign</a>/sign)  <a href="https://github.com/Cure221/fulpstation/blob/5c84b165cfd352905122f5c45a47e6d3ccde59fb/fulp_modules/features/barsigns/code/barsigns.dm#L16"><img src="git.png" width="16" height="16" title="fulp_modules/features/barsigns/code/barsigns.dm 16"></a></aside></h3><p>Redirect our barsigns to use OUR .dmi file instead.</p></main><footer>tgstation.dme <a href="https://github.com/Cure221/fulpstation/tree/5c84b165cfd352905122f5c45a47e6d3ccde59fb">5c84b16</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.9.0</a></footer></body></html>